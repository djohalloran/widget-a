= Couchbase Lite on Java -- Installing

:param-abstract: This content provides instructions that enable you to deploy Couchbase Lite on {param-name}
:param-related: {gs-install--xref} | {gs-prereqs--xref} | {gs-build--xref}
:topic-group:

:url-download-ee: https://packages.couchbase.com/releases/couchbase-lite-java/{version-full}/couchbase-lite-java-ee-{version-full}.zip[Enterprise Edition]
:url-download-ce: https://packages.couchbase.com/releases/couchbase-lite-java/{version-full}/couchbase-lite-java-{version-full}.zip[Community Edition]


= Bonita Documentation
:description: Learn how to get the most out of the Bonita Platform and all of its components.
:page-aliases: ROOT:how-tos-index.adoc

Learn how to get the most out of the Bonita Platform and all of its components.

[.card-section]
== Your automation project with Bonita

[.card.card-index]
--
xref:bonita-overview:what-is-bonita-index.adoc[[.card-title]#What is Bonita?# [.card-body.card-content-overflow]#pass:q[A useful overview (purpose, project elements, architecture)!]#]
--

[.card.card-index]
--
xref:ROOT:release-notes.adoc[[.card-title]#What's new in {bonitaVersion}# [.card-body.card-content-overflow]#pass:q[At a glance: new values, improvements, changes, and bug fixes]#]
--

[.card.card-index]
--
xref:ROOT:project-best-practices-index.adoc[[.card-title]#Project best practices# [.card-body.card-content-overflow]#pass:q[Helpful experience we share for the good of your project]#]
--

[.card.card-index]
--
xref:ROOT:api-index.adoc[[.card-title]#Bonita API# [.card-body.card-content-overflow]#pass:q[REST API, Java API, your own API]#]
--

[.card-section]
== Quick start

[.card.card-index]
--
xref:ROOT:bonita-studio-download-installation.adoc[[.card-title]#Studio installation# [.card-body.card-content-overflow]#pass:q[How to download and install Bonita Studio]#]
--

[.card.card-index]
--
xref:ROOT:getting-started-index.adoc[[.card-title]#Getting Started Tutorial# [.card-body.card-content-overflow]#pass:q[A 9-step journey to create a simple Automation Project]#]
--

[.card.card-index]
--
xref:ROOT:runtime-installation-index.adoc[[.card-title]#Runtime installation# [.card-body.card-content-overflow]#pass:q[Install and configure a Bonita Runtime to bring your project to life]#]
--

[.card-section]
== You are not alone

[.card.card-index]
--
https://community.bonitasoft.com/c/q-a/6[[.card-title]#Questions & Answers among Bonita Community# [.card-body.card-content-overflow]#pass:q[Ask your question, provide an answer]#]
--

[.card.card-index]
--
https://community.bonitasoft.com/c/project/5[[.card-title]#Community projects# [.card-body.card-content-overflow]#pass:q[Do not start from scratch and use artifacts shared by the Community members]#]
--

[.card.card-index]
--
https://www.youtube.com/playlist?list=PLvvoQatxaHOMHRiP7hFayNXTJNdxIEiYp[[.card-title]#Your journey to learn Bonita# [.card-body.card-content-overflow]#pass:q[Replays of our Bonita Camps]#]



= Documentation

Explore our guides and examples to learn how to integrate OpenZeppelin security products with your project.    

[.card-section]
== Explore using OpenZeppelin

OpenZeppelin provides a complete suite of security products to adopt security best practices from the first line of code all the way to running your decentralized application on-chain.

[.card-section.card-section-2col]
====
[.card.card-primary.card-contracts]
--
xref:contracts::index.adoc[[.card-title]#Contracts# [.card-body]#pass:q[A library of modular, reusable, and secure smart contracts, written in Solidity.]#]
--

[.card.card-primary.card-defender]
--
xref:defender::index.adoc[[.card-title]#Defender# [.card-body]#pass:q[A mission-critical developer security platform to code, audit, deploy, monitor, and operate blockchain applications.]#]
--
====

[.card.card-secondary.card-community]
--
xref:community-contracts::index.adoc[[.card-title]#Community Contracts# [.card-body]#pass:q[A community-driven extension of our Solidity library.]#]
--

[.card.card-secondary.card-upgrades]
--
xref:upgrades.adoc[[.card-title]#Upgrades# [.card-body]#pass:q[A comprehensive suite of contracts and tooling to deploy and manage upgradeable contracts on Ethereum.]#]
--

[.card.card-secondary.card-contracts-cairo]
--
xref:contracts-cairo::index.adoc[[.card-title]#Contracts for Cairo# [.card-body]#pass:q[A library for secure smart contract development written in Cairo for Starknet.]#]
--

[.card.card-secondary.card-contracts-stylus]
--
xref:contracts-stylus::index.adoc[[.card-title]#Contracts for Stylus# [.card-body]#pass:q[A library for secure smart contract development written in Rust for Arbitrum Stylus.]#]
--

[.card.card-secondary.card-substrate-runtimes]
--
xref:substrate-runtimes::index.adoc[[.card-title]#Substrate Runtimes# [.card-body]#pass:q[A collection of runtime templates for parachain development on Polkadot.]#]
--

[.card.card-secondary.card-uniswap-hooks]
--
xref:uniswap-hooks::index.adoc[[.card-title]#Uniswap Hooks# [.card-body]#pass:q[A Solidity library for secure and modular Uniswap hooks.]#]
--

[.card.card-secondary.card-solidity-docgen]
--
https://github.com/OpenZeppelin/solidity-docgen[[.card-title]#Solidity Docgen# [.card-body]#pass:q[A tool for automatically generating documentation based on the natspec comments of your Solidity contracts.]#]
--

=== Security Audits

OpenZeppelin security audits are trusted by leading organizations building decentralized systems. Browse through past public audits in our https://blog.openzeppelin.com/security-audits/[blog] and follow our https://blog.openzeppelin.com/follow-this-quality-checklist-before-an-audit-8cc6a0e44845/[quality checklist] before going to production. To learn more about OpenZeppelin’s audit process and request an audit, please visit our https://openzeppelin.com/security-audits/[security audits site].

[.card-section]
== Learn

Comprehensive guides for every step of your development journey.

include::learn::partial$cards.adoc[]

Check out https://forum.openzeppelin.com/c/general/guides-and-tutorials/23[the OpenZeppelin forum] for additional community-contributed guides!

=== Ethernaut

Learn more about security in Solidity contracts by playing https://ethernaut.openzeppelin.com/[Ethernaut]. Every level in Ethernaut is a smart contract waiting to be hacked, and teaches you a vulnerability by having you exploit it - many of them based on real-life hacks! You can discuss your solutions or ask for tips in https://forum.openzeppelin.com/c/security/ethernaut/30[our forum].

== More from OpenZeppelin

=== Careers

OpenZeppelin is growing. If you enjoy using our products or reading our audit reports, and have a genuine interest in protecting the open economy, please check out our current https://openzeppelin.com/jobs/[job openings].

== Questions?

Join the OpenZeppelin community in https://forum.openzeppelin.com/[our forum] to https://forum.openzeppelin.com/c/support/17[ask for help], as well as share your feedback or showcase what you have built with OpenZeppelin!

== Share the Love!

If you are using OpenZeppelin contracts, tools, or libraries in your project, share the love with the rest of the community by adding a badge to your `README`! Let your audience know that your system is built with the most secure components available.



== Introduction


{cbl-te} on Java {version-full} enables development and deployment of {cbl} applications to a JVM environment.
You can deploy Standalone (Java Desktop/Console) apps or Web Apps (using, for example, {gpWebServerEnv}; including embedded {gpWebServerEnv} deployments).


.Quick Steps
****
For experienced developers, this is all you need to add _{cbl} for {param-title} {version-full}_ to your application projects.

[{tabs}]
=====
Enterprise Edition::
+
--
Include the following in your Gradle `build.gradle` or Maven `pom.xml` file, as appropriate:

* The Couchbase Enterprise Edition repository +
`https://mobile.maven.couchbase.com/maven2/dev/`

* The {cbl} Enterprise Edition dependency: +
`couchbase-lite-java-ee:{version-full}`

. If you want to use Vector Search, add the Couchbase Lite Vector Search dependency: `couchbase-lite-java-vector-search`
. You must then use `CouchbaseLite.enableVectorSearch();` to enable the vector search extension.
--

Community Edition::
+
--
. Include the {cbl} for Java dependency in your Gradle `build.gradle` or Maven `pom.xml` file, as appropriate: +
`couchbase-lite-java:{version-full}`
. For Gradle: +
Check you have `mavenCentral()` in `repositories` (or in `settings.gradle`). +
Maven automatically checks its own repo for dependencies.
--
=====

NOTE: for Linux, make sure you have followed the xref:gs-prereqs.adoc#additional-steps-for-linux[additional steps required].

****
That's it!
You're all set to begin developing powerful {cbl} applications.

Now, try the xref:gs-build.adoc[Getting Started] application, which demonstrates use of key CRUD functionality.



== Preparing Your Build Environment


This section shows how to set up and use {cblJP} to build desktop and web applications using {gpBuildTool}, Maven, {gpWebServerEnv} and {gpIDE} Community Edition.
It assumes a familiarity with these products, however you are free to use your own choice of development tools.

=== Binaries

{cblJP} binaries are available for both Community (CE) and Enterprise (EE) editions from the _Maven_ repositories.

=== Prerequisites

* Planning to sync with a {svr}?
+
You will need to have runnable instances of {svr} and {sg} installed.
If you have not already done so see {sgw-prepare--xref}
* Running on Microsoft Windows?
+
Windows requires {Cpp} runtime installed.
Please install the Visual {Cpp} Redistribution package from this link:
https://www.microsoft.com/en-us/download/details.aspx?id=52685

* Deploying to Linux? +
You need to deploy the {cbl} `support` library, which is available _only_ on the zip download distributable.
See the _Additional Steps for Linux_ section in xref:gs-prereqs.adoc#additional-steps-for-linux[].


== Standalone Apps

[IMPORTANT]
--
To use Vector Search, you must have Couchbase Lite installed and add the Vector Search extension to your Couchbase Lite application.
Vector Search is available only for 64-bit architectures and
Intel processors that support the Advanced Vector Extensions 2 (AVX2) instruction set.
To verify whether your device supports the AVX2 instructions set, https://www.intel.com/content/www/us/en/support/articles/000090473/processors/intel-core-processors.html[follow these instructions.] 
--

=== Using Gradle

. Create a project folder
. Initialize it for a Gradle Java application
. Include the content shown in <<ex-bgf1>> in your app-level `build.gradle` file
. Open the project folder in {gpIDE} and import the {gpBuildTool} settings.
+
--
TIP: If you don't have auto-import set for Gradle projects, then accept the *Import Gradle Project* prompt that is displayed bottom-right of the screen +
Note the Gradle menu at the extreme right of the screen:

image::GradleMenuWebApp.png[,300]
--

That's it.
You're all set to start building your own {cblJP} applications -- see {gs-build--xref} for an example of how to do that.

.build.gradle file content
[#ex-bgf1]
====
[{tabs}]
=====

Enterprise Edition::
+
--
.Compile options
[source,groovy, subs="attributes+"]
----
// Required only if your project has some Kotlin source code
kotlinOptions { jvmTarget = '11' }

// Set minimum JVM level to ensure availability of, for example, lambda expressions
compileOptions {
    targetCompatibility JavaVersion.VERSION_11
    sourceCompatibility JavaVersion.VERSION_11

//   ... other section content as required by user
} 

----

.Dependencies

[source,groovy, subs="attributes+"]
----
dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java:{version-full}"

//   ... other section content as required by user
}

----

.Repositories
[source,groovy, subs="attributes+"]
----
repositories {
    maven {url 'https://mobile.maven.couchbase.com/maven2/dev/'}

//   ... other section content as required by user
    }

----
--

Vector Search Extension::
+
NOTE: Vector Search is an *Enterprise-only* feature.
+
--
.Compile options
[source,groovy, subs="attributes+"]
----
// Required only if your project has some Kotlin source code
kotlinOptions { jvmTarget = '11' }

// Set minimum JVM level to ensure availability of, for example, lambda expressions
compileOptions {
    targetCompatibility JavaVersion.VERSION_11
    sourceCompatibility JavaVersion.VERSION_11

//   ... other section content as required by user
} 

----

.Dependencies

[source,groovy, subs="attributes+"]
----
dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java:{version-full}"

  // All standard 64-bit ARM architectures
  implementation 'com.couchbase.lite:couchbase-lite-java-vector-search-arm64-{vs-version-maintenance}'

//   ... other section content as required by user
}

----

.Repositories
[source,groovy, subs="attributes+"]
----
repositories {
    maven {url 'https://mobile.maven.couchbase.com/maven2/dev/'}
    google()
    mavenCentral()

//   ... other section content as required by user
    }

----


--

Community edition::
+
--
.Compile options
[source,groovy, subs="attributes+"]
----
// Required only if your project has some Kotlin source code
kotlinOptions { jvmTarget = '11' }

// Set minimum JVM level to ensure availability of, for example, lambda expressions
compileOptions {
    targetCompatibility JavaVersion.VERSION_11
    sourceCompatibility JavaVersion.VERSION_11

//   ... other section content as required by user
}

----

.Dependencies
[source,groovy, subs="attributes+"]
----
dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java:{version-full}"

//   ... other section content as required by user
}

----
--

=====
====

[.include-in-toc]
=== Using Maven

. Include the content shown in <<ex-bmf1>> in your `pom.xml` file in the root of your project folder

. That's it -- just add your own code

You're all set to start building your own {cblJP} applications -- see {gs-build--xref} for an example of how to do that.

.pom.xml file content
[#ex-bmf1]
====
[{tabs}]
=====
Enterprise Edition::
+
--
.Compile properties
[source, XML, subs="attributes+"]
----
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>11</maven.compiler.source>
    <maven.compiler.target>11</maven.compiler.target>
</properties>

----

.Dependencies

[source, XML, subs="attributes+"]
----
<dependencies>

    <dependency>
      <groupId>com.couchbase.lite</groupId>
      <artifactId>couchbase-lite-java-ee</artifactId>
      <version>{version-full}</version>
    </dependency>

    <!-- ... any other section content as required by user-home  -->
</dependencies>

----

.Repositories
[source,xml, subs="attributes+"]
----
<repositories>
  <repository>
    <id>couchbase</id>
    <url>https://mobile.maven.couchbase.com/maven2/dev/</url>
  </repository>
  //   ... any other section content as required by user

</repositories>

----
--

Community edition::
+
--
.Compile properties
[source, XML, subs="attributes+"]
----
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>11</maven.compiler.source>
    <maven.compiler.target>11</maven.compiler.target>
</properties>

----

.Dependencies
[source, xml, subs="attributes+"]
----

<dependencies>
  <dependency>
      <groupId>com.couchbase.lite</groupId>
      <artifactId>couchbase-lite-java</artifactId>
      <version>{version-full}</version>
  </dependency>

  //   ... any other section content as required by user
</dependencies>

----
--

=====
====


== Web App Development


This section explains how to set-up a build project to create {cblJP} web apps using {gpBuildTool} and {gpIDE}.

.Using Maven
[TIP]
--
For examples of how to do this using Maven POM files, see --

* https://github.com/couchbaselabs/mobile-travel-sample/tree/master/java/TravelSample[Couchbase Mobile Workshop]

* https://github.com/couchbaselabs/mobile-training-todo/tree/release/lithium/java-ws/server/Todo[Mobile Training To Do App]
--


=== Tomcat

In our examples here we build and deploy web apps using a {gpBuildTool} plugin based on the `com.bmuschko.tomcat` plugin.
It provides a simple {gpWebServerEnv} harness that can be used from within {gpIDE} or the command-line -- see <<lbl-tomcat>>

[#bmkMultCblJapps, Running multiple {cblJP} web apps]
=== Multiple Web Apps

Each web application has its own *class loader (WebappX).
This loads the classes, jars, and resources found in the application's `WEB-INF/classes` and `WEB-INF/lib` folders, together with any shared jar files from `$CATALINA_BASE/lib` -- see https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html[tomcat documentation] for more.

So, if you are running multiple {cbl} web applications, deploy your {cbljp} library `<pathToCbl>/libs` to `$CATALINA_BASE/lib`. This means you do not need to deploy it in each web app and *minimizes the size of each app*.

NOTE:  Configuring {cbl} logging functionality will affect the logging of all web applications as the _common class loader_ shares _{cbl} Console, File_ and _Custom logging functionalities_  across all  web apps.

For information about building a WAR file see <<lbl-war>>

=== Prerequisites

* Ensure your build environment matches the runtime {gpWebServerEnv} environment.
Specifically, that the Java and {gpWebServerEnv} versions are the same.
* If your {gpWebServerEnv} server runs Linux, declare the _shared libraries_ (`<pathToCbl>/support`) in the `$CATALINA_HOME/bin/setenv.sh` script file -- see: _Additional Steps for Linux_ section in {gs-prereqs--xref}.
* Ensure the {cbl} jars (`<pathToCbl>/lib`) are on the executable path within {gpWebServerEnv} -- see: <<bmkMultCblJapps>>
+

TIP: This also means you should declare the dependencies as `providedCompile` to avoid them being bundled into the `WEB-INF/libs` folder

=== Steps

. Create a project folder and initialize it for a Gradle Java application
+
[source, bashrc]
----
gradle init
----

. Create your `build.gradle` file, including the <<ex-bgf2>> in your app-level build.gradle:

. Open the project folder in {gpIDE} and import the {gpBuildTool} settings.

TIP: If you don't have auto-import set for Gradle projects, then accept the   *Import Gradle Project* prompt that is displayed bottom-right of the screen. +
Note the Gradle menu at the extreme right of the screen: +
image::GradleMenuWebApp.png[,300]

If you want to deploy your app to a local tomcat container then see <<Deploying a WAR file to tomcat>>

That's it.
You're all set to start building your own {cblJP} applications -- see xref:gs-build.adoc[Building a Getting Started App] for an example of how to do that.

.build.gradle file content
[#ex-bgf2]
====
[{tabs}]
=====

Community::
+
--

[source,groovy,subs=attributes+]
----
dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java:{version-full}"

//   ... other section content as required by user
}

----

--

Enterprise::
+
--
[source,groovy, subs="attributes+"]]

----
repositories {
    maven {url 'https://mobile.maven.couchbase.com/maven2/dev/'}

//   ... other section content as required by user
    }

dependencies {
    implementation "com.couchbase.lite:couchbase-lite-java-ee:{version-full}"

//   ... other section content as required by user
    }

----
=====
====


[#lbl-tomcat]
== Embedded Tomcat

The simplest way to build and deploy your {cblJP} web app is to use a {gpBuildTool} plugin that provides a simple {gpWebServerEnv} harness.

Our examples are based on the `com.bmuschko.tomcat` plugin -- see https://github.com/bmuschko/gradle-tomcat-plugin[com.bmuschko.tomcat on Github].

Including the plugin in your `build.gradle` file make a number of tomcat tasks available to you. View them using:

[source, bash]
----
./gradlew tasks
----

This shows that the following web application tasks are now available:

** `tomcatJasper` - Runs the JSP compiler and turns JSP pages into Java source.
** `tomcatRun` - Uses your files as and where they are and deploys them to Tomcat.
** `tomcatRunWar` - Assembles the web app into a war and deploys it to Tomcat.
** `tomcatStop` - Stops Tomcat.

So, to run the app use:

[source, bash]
----
./gradlew tomcatRun
----

[#lbl-war]
== Deploying a WAR File

To deploy your web app to a local Tomcat instance you need to generate a WAR file.
However, you should note that when creating a war file, if you use the `implementation` dependency type then your _{cbl}_ jar files will be bundled into WEB-INF/lib of the web application.
To exclude {cbl} jar files from getting bundled and to use {cbl} in multiple web applications, change the dependency type from *`implementation`* to *`providedCompile`*

. You can do this using the Gradle command below from within your project folder:
[source, bashrc]
+
----
./gradlew war
----
+
NOTE:  The generated war file will be at <PROJECT ROOT>/build/libs.


. Deploy the war file to Tomcat, by copying it to $CATALINA_BASE/webapps
+
TIP: You can also use Tomcat’s Manager App to deploy the war file -- see https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html[Tomcat's Manager App] documentation for more detail.

. To use common class loader approach to load {cbl} libraries, copy all of the {cbl} jar files in $CATALINA_BASE/lib.
+
NOTE: For linux platform see also -- _Using Native Libraries for Linux_ in {gs-prereqs--xref}


